<html><head><link rel="STYLESHEET" href="../book.css"  type="text/css"/><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Tkenv and C&#8288;+&#8288;+</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OMNeT&#8288;+&#8288;+ User Guide"><link rel="up" href="ch08.html" title="Chapter 8. The Tkenv Graphical Runtime Environment"><link rel="prev" href="ch08s07.html" title="The Preferences Dialog"><link rel="next" href="ch08s09.html" title="Reference"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tkenv and C&#8288;+&#8288;+</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s07.html">Prev</a> </td><th width="60%" align="center">Chapter 8. The Tkenv Graphical Runtime Environment</th><td width="20%" align="right"> <a accesskey="n" href="ch08s09.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm3393"></a>Tkenv and C&#8288;+&#8288;+</h2></div></div></div><p>This section describes which C&#8288;+&#8288;+ API functions various parts of Tkenv employ
      to display data and otherwse perform their functions. Most functions are member
      functions of the <code class="literal">cObject</code> class.
    </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3397"></a>Inspectors</h3></div></div></div><p>Inspectors display the hierarchical name (i.e. full path) and class name
        of the inspected object in the title using the <code class="literal">getFullPath()</code> and <code class="literal">getClassName()</code>
        <code class="literal">cObject</code> member functions. The <span class="emphasis"><em>Go to parent</em></span> feature in inspectors uses the
        <code class="literal">getOwner()</code> method of <code class="literal">cObject</code>.
      </p><p>The <span class="emphasis"><em>Object Navigator</em></span> displays the full name and class name of each object
        (<code class="literal">getFullName()</code> and <code class="literal">getClassName()</code>), and also the ID for classes that have one
        (<code class="literal">getId()</code> on <code class="literal">cMessage</code> and <code class="literal">cModule</code>). When you hover with the mouse, the tooltip
        displays the info string (<code class="literal">str()</code> method). The roots of the tree are the network module
        (<code class="literal">simulation.getSystemModule()</code>) and the FES (<code class="literal">simulation.getFES()</code>.
        Child objects are enumerated with the help of the <code class="literal">forEachChild()</code> method.
      </p><p>In the <span class="emphasis"><em>Object Inspector</em></span>, the <span class="emphasis"><em>Contents</em></span> page displays the full name,
        class name and info string (<code class="literal">getFullName()</code>, <code class="literal">getClassName()</code>, <code class="literal">str()</code>)
        of child objects enumerated using <code class="literal">forEachChild()</code>. <code class="literal">forEachChild()</code> can only
        enumerate objects that are subclassed from <code class="literal">cObject</code>. If you want your
        non-<code class="literal">cObject</code> variables (e.g. primitive types or STL containers) to appear
        in the <span class="emphasis"><em>Contents</em></span> list, you need to wrap them into <code class="literal">cObject</code>. The <code class="literal">WATCH()</code>
        macro does exactly that: it creates an object wrapper that displays the
        variable's value via the wrapper's <code class="literal">str()</code> method. There are watch macros
        for STL contains as well, they present the wrapped object to Tkenv in a more
        structured way, via custom class descriptors (cClassDescriptor, see below).
      </p><p> One might ask how the <code class="literal">forEachChild()</code> method of modules can enumerate
        messages, queues, and other objects that are owned by the module. The answer is
        that the module class maintains a list of owned objects, and <code class="literal">cObject</code>
        automatically joins that list.
      </p><p> The <span class="emphasis"><em>Object Inspector</em></span>'s <span class="emphasis"><em>Fields</em></span> page display an object's fields by
        making use of the class descriptor (<code class="literal">cClassDescriptor</code>) for that class.
        Class descriptors are automatically generated for new classes by the message compiler.
        Class descriptors for the OMNeT&#8288;+&#8288;+ library classes are also generated by the
        message compiler, see <code class="literal">src/sim/sim_std.msg</code> in the source tree.
      </p><p> The <span class="emphasis"><em>Network Display</em></span> uses <code class="literal">cSubmoduleIterator</code> to enumerate submodules,
        and its <span class="emphasis"><em>Go to parent module</em></span> function uses <code class="literal">getParentModule()</code>. Background and
        submodule rendering is based on display strings (<code class="literal">getDisplayString()</code> method of
        <code class="literal">cComponent</code>).
      </p><p> The module log page of <span class="emphasis"><em>Log Viewer</em></span> displays the output to <code class="literal">EV</code> streams
        from modules and channels.
      </p><p> The message/packet traffic page of <span class="emphasis"><em>Log Viewer</em></span> shows information based
        on stored copies of sent messages (the copy is created using <code class="literal">dup()</code>), and stored
        sendhop information. The <span class="emphasis"><em>Name</em></span> column displays the message name (<code class="literal">getFullName()</code>).
        However, the <span class="emphasis"><em>Info</em></span> column does not display the string returned from <code class="literal">str()</code>,
        but rather, strings produced by a <code class="literal">cMessagePrinter</code> object. Message printers
        can be dynamically registered.
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3457"></a>During Simulation</h3></div></div></div><p> Tkenv sets up a network by calling <code class="literal">simulation.setupNetwork()</code>, then
        immediately proceeds to invoke <code class="literal">callInitialize()</code> on the root module.
        During simulation, <code class="literal">simulation.takeNextEvent()</code> and <code class="literal">simulation.executeEvent()</code>
        are called iteratively. When the simulation ends, Tkenv invokes <code class="literal">callFinish()</code>
        on the root module; the same happens when you select the <span class="emphasis"><em>Conclude Simulation</em></span>
        menu item. The purpose of <code class="literal">callFinish()</code> is to record summary statistics
        at the end of a successful simulation run, so it will be skipped if an error occurs
        during simulation. On exit, and before a new network is set up,
        <code class="literal">simulation.deleteNetwork()</code> is called.
      </p><p> The <span class="emphasis"><em>Debug Next Event</em></span> menu item issues the <code class="literal">int3</code> x86 assembly instruction
        on Windows, and raises a <code class="literal">SIGTRAP</code> signal on other systems.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch08.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch08s09.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The Preferences Dialog </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Reference</td></tr></table></div></body></html>
