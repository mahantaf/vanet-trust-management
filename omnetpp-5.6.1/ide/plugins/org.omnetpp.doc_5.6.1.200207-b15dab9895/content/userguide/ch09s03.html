<html><head><link rel="STYLESHEET" href="../book.css"  type="text/css"/><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Sequence Chart</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OMNeT&#8288;+&#8288;+ User Guide"><link rel="up" href="ch09.html" title="Chapter 9. Sequence Charts"><link rel="prev" href="ch09s02.html" title="Creating an Eventlog File"><link rel="next" href="ch09s04.html" title="Eventlog Table"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Sequence Chart</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09s02.html">Prev</a> </td><th width="60%" align="center">Chapter 9. Sequence Charts</th><td width="20%" align="right"> <a accesskey="n" href="ch09s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm3568"></a>Sequence Chart</h2></div></div></div><p>
      This section describes the Sequence Chart in detail, focusing on its features
      without a particular example.
      
    </p><p>
      The Sequence Chart is divided into three parts: the top gutter, the bottom gutter and the
      main area. The gutters show the simulation time while the main area displays module
      axes, events and message sends. The chart grows horizontally with simulation time
      and vertically with the number of modules. Module axes can optionally display
      enumerated or numerical vector data.
    </p><p>
      There are various options, which control how and what the Sequence Chart
      displays. Some of these are available on the toolbar, while others are
      accessible only from the context menu.
    </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3573"></a>Legend</h3></div></div></div><p>
	Graphical elements on the Sequence Chart represent modules, events and messages,
	as listed in the following table.
      </p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col width="170"><col></colgroup><tbody><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SimpleModuleAxis.png"></span></td><td valign="middle">simple module axis</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-CompoundModuleAxis.png"></span></td><td valign="middle">compound module axis</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-AxisWithAttachedVector.png"></span></td><td valign="middle">axis with attached vector data</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-ModuleFullPath.png"></span></td><td valign="middle">module full path as axis label</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-InitializationEvent.png"></span>
	        (hollow circle)</td><td valign="middle">initialization event</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SelfMessageProcessingEvent.png"></span>
	        (green disc)</td><td valign="middle">self-message processing event</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MessageProcessingEvent.png"></span>
	        (red disc)</td><td valign="middle">message processing event</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-EventNumber.png"></span></td><td valign="middle">event number</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SelfMessage.png"></span>
	        (blue arrow, arched)</td><td valign="middle">self-message</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MessageSend.png"></span>
	        (blue arrow)</td><td valign="middle">message send</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MessageReuse.png"></span>
	        (green dotted arrow)</td><td valign="middle">message reuse</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MethodCall.png"></span>
            (brown dotted arrow)</td><td valign="middle">method call</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SplitArrow.png"></span>
	        <p>(arrow with a dashed segment)</p></td><td valign="middle">message send that goes far away; split arrow</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-ZigZagArrow.png"></span>
	        <p>(arrow with zigzag)</p></td><td valign="middle">virtual message send; zigzag arrow</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-TransmissionDuration-ReceptionAtStart.png"></span>
	        <p>(blue parallelogram)</p></td><td valign="middle">transmission duration; reception at start</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-TransmissionDuration-ReceptionAtEnd.png"></span>
	        <p>(blue parallelogram)</p></td><td valign="middle">transmission duration; reception at end</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SplitTransmissionDuration-ReceptionAtStart.png"></span>
	        <p>(blue strips)</p></td><td valign="middle">split transmission duration; reception at start</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SplitTransmissionDuration-ReceptionAtEnd.png"></span>
	        <p>(blue strips)</p></td><td valign="middle">split transmission duration; reception at end</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MessageName.png"></span>
            (blue letters)</td><td valign="middle">message name</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-MethodName.png"></span>
            (brown letters)</td><td valign="middle">method name</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-ZeroSimulationTimeRegion.png"></span>
	        (gray background)</td><td valign="middle">zero simulation time region</td></tr><tr valign="middle"><td valign="middle"><span class="guibutton"><img src="pictures/SequenceChart-Legend-SimulationTimeHairline.png"></span>
	        (dashed gray line)</td><td valign="middle">simulation time hairline</td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3697"></a>Timeline</h3></div></div></div><p>
	Simulation time may be mapped onto the horizontal axis in various ways; linear
	mapping is only one of the ways. The reason for having multiple mapping modes is
	that intervals between interesting events are often of different magnitudes (e.g.
	microsecond timings in a MAC protocol versus multi-second timeouts in higher
	layers), which is impossible to visualize using a linear scale.
      </p><p>
        The available timeline modes are:
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
	    Linear -- the simulation time is proportional to the distance measured in
	    pixels.
	  </li><li class="listitem">
	    Event number -- the event number is proportional to the distance measured in
	    pixels.
	  </li><li class="listitem">
	    Step -- the distance between subsequent events, even if they have non-subsequent
	    event numbers, is the same.
	  </li><li class="listitem">
	    Nonlinear -- the distance between subsequent events is a nonlinear function of
	    the simulation time between them. This makes the figure compact even if there
	    are several magnitudes difference between simulation time intervals. On the
	    other hand, it is still possible to decide which interval is longer and which
	    one is shorter.
	  </li><li class="listitem">
	    Custom nonlinear -- like nonlinear. This is useful in those rare cases when
	    the automatic nonlinear mode does not work well. The best practice is to
	    switch to <span class="emphasis"><em>Nonlinear</em></span> mode first and then to
	    <span class="emphasis"><em>Custom nonlinear</em></span>, so that the chart will continuously
	    refresh as the parameters change. At the extreme, you can set the
	    parameters so that the nonlinear mode becomes equivalent to linear mode or
	    step mode.
	  </li></ul></div><p>
	 You can switch between timeline modes using the <span class="guibutton"><img src="icons/timelinemode.png"></span> button on the toolbar or from the context menu.
      </p><p>
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3712"></a>Zero Simulation Time Regions</h3></div></div></div><p>
	It is quite common in simulation models for multiple events to occur at the same
	simulation time, possibly in different modules. A region with a gray background
	indicates that the simulation time does not change along the horizontal axis
	within the area, thus all events inside it have the same simulation time
	associated with them.
      </p><div class="figure"><a name="pictures/SequenceChart-ZeroSimulationTimeRegions.png"></a><p class="title"><b>Figure 9.2. Nonlinear simulation time</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-ZeroSimulationTimeRegions.png" align="middle" alt="Nonlinear simulation time"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3723"></a>Module Axes</h3></div></div></div><p>
	The Sequence Chart's vertical axis corresponds to modules in the simulation. By
	default, each simple module is displayed on a separate horizontal axis and events
	that occurred in that module are shown as circles on it. A compound module is
	represented with a double line and it will display events from all contained
	simple modules, except internal events and those that have their own axes
	displayed. An event is internal to a compound module if it only processes a
	message from, and sends out messages to, other modules inside.
      </p><p>
	It is not uncommon for some axes to not have any events at all. These axes would
	waste space by occupying some place on the screen, so by default they are omitted from
	the chart unless the <span class="emphasis"><em>Show Axes Without Events</em></span> option is
	turned on. The discovery process is done lazily as you navigate through the chart,
	and it may add new axes dynamically as soon as it turns out that they actually
	have events.
      </p><p>
	Module axes can be reordered with the option <span class="emphasis"><em>Axis Ordering
	Mode</em></span> <span class="guibutton"><img src="icons/axisordering.gif"></span>. Ordering can be manual, or sorted
	by module name, by module id or by minimizing the total number of axes that arrows
	cross.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The algorithm that minimizes crossings works by taking a random sample from the
        file and determines the order of axes from that (which means that the resulting
        order will only be an approximation). A more precise algorithm, which takes all
        arrows into account would not be practical because of the typically large size of
        eventlog files.
      </div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3733"></a>Gutter</h3></div></div></div><p>
	The upper and lower edges of the Sequence Chart show a gutter that displays the
	simulation time. The left side of the top gutter displays a <span class="emphasis"><em>time
	prefix</em></span> value, which should be added to each individual simulation time
	shown at the vertical hairlines. This reduces the number of characters on the
	gutter and allows easier recognition of simulation time changes in the
	significant digits. The right side of the figure displays the simulation time
	range that is currently visible within the window.
      </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
	To see the simulation time at a specific point on the chart, move the
	mouse to the desired place and read the value in the blue box horizontally
	aligned with the mouse on the gutter.
      </div><div class="figure"><a name="pictures/SequenceChart-Gutter.png"></a><p class="title"><b>Figure 9.3. Gutter and range</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-Gutter.png" align="middle" alt="Gutter and range"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3746"></a>Events</h3></div></div></div><p>
	Events are displayed as filled circles along the module axes. A green circle
	represents the processing of a self-message, while a red circle is an event caused
	by receiving a message from another module. The event with event number zero
	represents the module initialization phase and may spread across multiple module
	axes because the simulation kernel calls each module during initialization. This
	event is displayed with a white background.
      </p><p>
	Event numbers are displayed below and to the right of their corresponding events
	and are prefixed with '#'. Their color changes according to their events' colors.
      </p><div class="figure"><a name="pictures/SequenceChart-Events.png"></a><p class="title"><b>Figure 9.4. Various event kinds</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-Events.png" align="middle" alt="Various event kinds"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3758"></a>Messages</h3></div></div></div><p>
	The Sequence Chart represents message sends with blue arrows. Vertically, the arrow
	starts at the module which sent the message and ends at the module which
	processed the message. Horizontally, the start and end points of the arrow
	correspond to the sender and receiver events. The message name is displayed near
	the middle of the arrow, but not exactly in the middle to avoid overlapping with other names
	between the same modules.
      </p><p>
	Sometimes, when a message arrives at a module, it simply stores it and later sends
	the very same message out. The events, where the message arrived, and where the
	message was actually sent, are in a so-called "message reuse" relationship. This is
	represented by a green dotted arrow between the two events. These arrows are not
	shown by default because timer self-messages are usually reused
	continuously. This would add unnecessary clutter to the chart and would make it
	hard to understand. To show and hide these arrows, use the <span class="emphasis"><em>Show Reuse
	Messages</em></span> <span class="guibutton"><img src="icons/reusearrows.png"></span> button on the toolbar.
      </p><p>
	Sometimes, depending on the zoom factor, a message send goes far away on the
	chart. In this case, the line is split into two smaller parts that are displayed at
	the two ends pointing towards each other, but without a
	continuous line connecting them. At one end of both arrow pieces is a dotted line while at the other end
	is a solid line. The one which is solid always points exactly to, or from, the
	event to which it is connected. The other one, which is dotted, either specifies
	the module where the arrow starts, or ends, or in the case of a
	self-message, it points toward the other arrow horizontally.
      </p><div class="figure"><a name="pictures/SequenceChart-SplitArrows.png"></a><p class="title"><b>Figure 9.5. Split arrows</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-SplitArrows.png" align="middle" alt="Split arrows"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3774"></a>Displaying Module State on Axes</h3></div></div></div><p>
        It is possible to display a module's state on an axis. The axis is then
        rendered as a colored strip that changes color every time the module state
        changes. The data are taken from an output vector in an <span class="emphasis"><em>output vector file</em></span>,
        normally recorded by the simulation together with the eventlog file.
      </p><div class="figure"><a name="pictures/SequenceChart-AxisWithState.png"></a><p class="title"><b>Figure 9.6. Axis with state information displayed</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-AxisWithState.png" align="middle" alt="Axis with state information displayed"></div></div></div></div><br class="figure-break"><p>
	To attach an output vector to an axis, right-click the desired axis and select
	<span class="emphasis"><em>Attach Vector to Axis</em></span> from the context menu. You will be prompted for an
	output vector file and for a vector in the file. If the vector is of type enum
	(that is, it has metadata attached that assigns symbolic names to values, e.g.
	<span class="emphasis"><em>IDLE</em></span> for 0, <span class="emphasis"><em>TRANSMIT</em></span> for 1, etc.), then the chart will display symbolic
	names inside the strip, otherwise it will display the values as numbers. The
	background coloring for the strip is automatic.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Recording output vectors is explained in the <span class="emphasis"><em>OMNeT&#8288;+&#8288;+ Simulation Manual</em></span>.
        It is recommended to turn on recording event numbers
        (<code class="literal">**.vector-record-eventnumbers = true</code> inifile setting), because that
        allows the Sequence Chart tool to display state changes accurately even
        if there are multiple events at the same simulation time.
        </p><p>
        The format of output vector files is documented in an appendix of the Manual.
        To see whether a given output vector is suitable for the Sequence Chart,
        search for the vector declaration (<code class="literal">vector... </code> line) in the file.
        When event numbers are enabled, the vector declaration will end in <code class="literal">ETV</code>
        (not <code class="literal">TV</code>). If a vector has an enum attached, there will be an <code class="literal">attr enum</code>
        line after the vector declaration. An example vector declaration with an enum:
        </p><pre class="screen">vector 5 Net.host[2].radio state ETV
attr enum "IDLE=0,TRANSMIT=1,RECEIVE=2"
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3800"></a>Zooming</h3></div></div></div><p>
	To zoom in or out horizontally along the timeline, use the <span class="emphasis"><em>Zoom
	In</em></span> <span class="guibutton"><img src="icons/zoomplus.png"></span> and <span class="emphasis"><em>Zoom Out</em></span> <span class="guibutton"><img src="icons/zoomminus.png"></span> buttons on the toolbar. To decrease or increase the
	distance between the axes, use the <span class="emphasis"><em>Increase/Decrease Spacing</em></span>
	<span class="guibutton"><img src="icons/incr_spacing.png"></span> <span class="guibutton"><img src="icons/decr_spacing.png"></span> commands.
	</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
	  When you zoom out, more events and messages become visible on the chart, making it
	  slower. When you zoom in, message lines start break, making it less informative. Try
	  to keep a reasonable zoom level.
	</div><p>
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3815"></a>Navigation</h3></div></div></div><p>
	To scroll through the Sequence Chart, use either the scroll bars, drag with the left mouse
	button or scroll with the mouse wheel using the <span class="keycap"><strong>Shift</strong></span> modifier
	key for horizontal scroll.
      </p><p>
	There are also navigation options to go to the previous
	(<span class="keycap"><strong>Shift+LEFT</strong></span>) or next (<span class="keycap"><strong>Shift+RIGHT</strong></span>) event in the
	same module.
      </p><p>
	Similar to navigating in the Eventlog Table, to go to the cause event, press
	<span class="keycap"><strong>Ctrl+LEFT</strong></span>. To go to the arrival of a message send, press
	<span class="keycap"><strong>Ctrl+RIGHT</strong></span> while an event is selected.
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3825"></a>Tooltips</h3></div></div></div><p>
	The Sequence Chart displays tooltips for axes, events, message sends and
	reuses. When a tooltip is shown for any of the above, the chart will highlight the
	corresponding parts. Sometimes, when the chart is zoomed out it might show a
	complex tooltip immediately because there are multiple items under the mouse.
      </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
	To measure the simulation time difference between two events, select one of them
	while staying at the other to display the tooltip.
      </div><div class="figure"><a name="pictures/SequenceChart-Tooltip.png"></a><p class="title"><b>Figure 9.7. Event tooltip</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-Tooltip.png" align="middle" alt="Event tooltip"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3837"></a>Bookmarks</h3></div></div></div><p>
	Just like the Eventlog Table, the Sequence Chart also supports bookmarks to make
	navigation easier. Bookmarks are saved for the files rather than the
	various editors, therefore they are shared between them. The chart highlights
	bookmarked events with a circle around them similar to primary selection but
	with a different color.
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3840"></a>Associated Views</h3></div></div></div><p>
	When you open an eventlog file in the Sequence Chart editor, it will automatically
	open the <span class="emphasis"><em>Eventlog Table View</em></span> with the same file. If you select an event on the
	Sequence Chart editor, then the <span class="emphasis"><em>Eventlog Table View</em></span> will jump to the same event
	and vice versa. This interconnection makes navigation easier and you can
	immediately see the details of the selected event's raw data.
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm3845"></a>Filtering</h3></div></div></div><p>
	You can also filter the contents of the Sequence Chart. This actually means that
	some of the events are not displayed on the chart so that the user can focus on
	the relevant parts. When filtering is turned on (displayed in the status line),
	some of the message arrows might have a filter sign (a double zigzag
	crossing the arrow line's center). Such a message arrow means that there is a
	message going out from the source module, which after processing in some other
	filtered out modules, reaches the target module. The message name of the arrow in
	this case corresponds to the first and the last message in the chain that was
	filtered out.
      </p><div class="figure"><a name="pictures/SequenceChart-ZigZagArrows.png"></a><p class="title"><b>Figure 9.8. Zigzag arrows</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/SequenceChart-ZigZagArrows.png" align="middle" alt="Zigzag arrows"></div></div></div></div><br class="figure-break"><p>
	When a module filter is used, it will determine which modules will have
	axes. If the events that occurred in a module are completely filtered out, then the Sequence
	Chart will not display the superfluous axis belonging to that module. This reduces
	the number of axes and makes it easier to understand the figure.
      </p><p>
	Events may not have subsequent event numbers, which means that the events in
	between have been filtered out. At the extreme, the chart may even be empty,
	meaning that there are no matching events at all.
      </p><p>
	To filter the Sequence Chart, open the <span class="emphasis"><em>Filter Dialog</em></span> using the
	filter button <span class="guibutton"><img src="icons/filter.png"></span> on the toolbar. You can also filter from
	the context menu using the shortcuts provided for events and message sends
	currently under the mouse.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Creating an Eventlog File </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Eventlog Table</td></tr></table></div></body></html>
