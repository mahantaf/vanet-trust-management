<html><head><link rel="STYLESHEET" href="../book.css"  type="text/css"/><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Running a Simulation</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OMNeT&#8288;+&#8288;+ User Guide"><link rel="up" href="ch06.html" title="Chapter 6. Launching and Debugging"><link rel="prev" href="ch06s02.html" title="Launch Configurations"><link rel="next" href="ch06s04.html" title="Batch Execution"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Running a Simulation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Launching and Debugging</th><td width="20%" align="right"> <a accesskey="n" href="ch06s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm1487"></a>Running a Simulation</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1489"></a>Quick Run</h3></div></div></div><p>
        The easiest way to launch a simulation is by selecting a project, folder, ini or NED file
        in <span class="emphasis"><em>Project Explorer</em></span>, and clicking the <span class="emphasis"><em>Run</em></span> button on the toolbar. This will
        create a suitable launch configuration (possibly after asking a few questions to
        clarify what you want to run) if one does not exist already. Instead of the <span class="emphasis"><em>Run</em></span>
        button, you can also choose the <span class="emphasis"><em>Run As... | OMNeT&#8288;+&#8288;+ Simulation</em></span> from the item's
        context menu.
      </p><p>The details:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">If a folder is selected and it contains a single INI file, the IDE will use
        this file to start the simulation.</li><li class="listitem">If an INI file is selected, it will be used during the launch as the main INI file
        for the simulation.</li><li class="listitem">If a NED file is selected which contains a network definition, the IDE will
        scan for INI files in the active projects and will try to find a configuration that allows
        this network to start.</li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1501"></a>The Run Configurations Dialog</h3></div></div></div><p>
        Launch configurations can be managed in the <span class="emphasis"><em>Run Configurations</em></span> dialog. (Two further
        dialogs, <span class="emphasis"><em>Debug Configurations</em></span> and <span class="emphasis"><em>Profile Configurations</em></span> are very similar, and
        allow you to manage debugging/profiling aspects of launch configurations).
      </p><p>
        The <span class="emphasis"><em>Run Configurations</em></span> can be opened in various ways: via the main menu (<span class="emphasis"><em>Run | Run Configurations...</em></span>);
        via the context menu item of a project, folder or file (<span class="emphasis"><em>Run As | Run Configurations...</em></span>);
        via the green <span class="emphasis"><em>Run</em></span> toolbar button (<span class="emphasis"><em>Run Configurations...</em></span> item of its attached menu, or
        by <span class="keycap"><strong>Ctrl</strong></span>-clicking any other menu item or the toolbar button itself).
      </p><div class="figure"><a name="pictures/Launch-RunProject.png"></a><p class="title"><b>Figure 6.1. One way of opening the <span class="emphasis"><em>Run Configurations</em></span> dialog</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/Launch-RunProject.png" align="middle" alt="One way of opening the Run Configurations dialog"></div></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1523"></a>Creating a Launch Configuration</h3></div></div></div><p>OMNeT&#8288;+&#8288;+ IDE adds a new Eclipse launch configuration type, <span class="emphasis"><em>OMNeT&#8288;+&#8288;+ Simulation</em></span>,
        that supports launching simulation executables. To create a new run configuration,
        open the <span class="emphasis"><em>Run Configurations...</em></span> dialog. In the dialog, select <span class="emphasis"><em>OMNeT&#8288;+&#8288;+ Simulation</em></span>
        from the tree, and click the <span class="emphasis"><em>New launch configuration</em></span> icon in the top-left corner.
        A blank launch configuration is created; you can give it a name at the top of the form
        that appears.
      </p><div class="figure"><a name="pictures/Launch-RunDialog.png"></a><p class="title"><b>Figure 6.2. The Simulation Launcher</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject" align="center"><img src="pictures/Launch-RunDialog.png" align="middle" alt="The Simulation Launcher"></div></div></div></div><br class="figure-break"><p> The <span class="emphasis"><em>Main</em></span> tab of the configuration dialog was designed to make the launching of simulations as
        easy as possible. The only required field is <span class="emphasis"><em>Working directory</em></span>; all others have defaults. If you
        only select the working directory and the simulation program, it will start the first configuration
        from the <code class="literal">omnetpp.ini</code> file in the specified working directory.
      </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
        Hover your mouse above the controls in this dialog and you will receive tooltip help for the
        selected control.
      </div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The <span class="emphasis"><em>Launch</em></span> dialog will try to figure out your initial settings automatically. If you select an INI
        file in the <span class="emphasis"><em>Project Explorer View</em></span>, or the active editor contains an INI file before launching the
        <span class="emphasis"><em>Run</em></span> dialog, the INI file and working directory field will be automatically populated for you. The
        dialog will try to guess the executable name based on the settings of your current open projects.
      </div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="emphasis"><em>Executable</em></span>: You must set the name of the simulation executable here. This is a workspace
            path. You may use the <span class="emphasis"><em>Browse...</em></span> button to select the executable directly. If your project output
            is a shared library, select <span class="emphasis"><em>opp_run</em></span>; it will cause the IDE to use the <code class="literal">opp_run</code> or the
            <code class="literal">opp_run_dbg</code> helper executable with the <code class="literal">-l</code> option to run the simulation. Make sure that
            the <span class="emphasis"><em>Dynamic Libraries</em></span> field in the advanced section contains the libraries you want to load.
          </p></li><li class="listitem"><p> <span class="emphasis"><em>Working directory</em></span>: Specifies the working directory of the simulation program. This is a
            workspace path. Note that values in several other fields in the dialog are treated as relative
            to this directory, so changing the working directory may invalidate or change the meaning of previously
            selected entries in other fields of the dialog.</p></li><li class="listitem"><p> <span class="emphasis"><em>Initialization file(s)</em></span>: You should specify one or more INI files that will be used to launch the
            simulation. The default is <code class="literal">omnetpp.ini</code>. Specifying more than one file (separated by space)
            will cause the simulation to load all those files in the specified order.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Config name</em></span>: Once you specify a legal INI file, the box will present all of the
            Config sections in that file. In addition, it will display the description of that section and the
            information regarding which Config section is extended by this section. You may select which Configuration
            should be launched.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
              The working directory and the INI file must contain valid entries before trying to set this
              option.
            </div><p>
          </p></li><li class="listitem"><p> <span class="emphasis"><em>Runs</em></span>: It is possible to specify which run(s) must be executed for the simulation.
            An empty field corresponds to all runs. You can specify run numbers or a filter expression
            that refers to iteration variables. Use the comma and .. to separate the run numbers;
            for example, 1,2,5..9,20 corresponds to run numbers 1,2,5,6,7,8,9,20.
            It is also possible to specify run filters, which are boolean expression
            involving constants and iteration variables (e.g. <span class="emphasis"><em>$numHosts&gt;5 and $numHosts&lt;10</em></span>).
            Running several simulations in this manner is called batch execution.
          </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
            If the executable name and the INI file were already selected, hover the mouse above the field
            to get the list of matching runs.
          </div></li><li class="listitem"><p> <span class="emphasis"><em>User interface</em></span>: You can specify which UI environment should be used during execution.
            The dialog offers <span class="emphasis"><em>Cmdenv</em></span> (command-line UI), <span class="emphasis"><em>Qtenv</em></span> (Qt-based GUI), and <span class="emphasis"><em>Tkenv</em></span> (legacy, Tk-based GUI).
            If you have a custom user interface, its name can also be specified here.
            Make sure that the code of the chosen UI library is available (linked into the executable/library
            or loaded dynamically).
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            Batch execution and progress feedback during simulation are only supported when using <span class="emphasis"><em>Cmdenv</em></span>.
          </div></li><li class="listitem"><p><span class="emphasis"><em>Allow multiple processes</em></span>: With batch execution, it is possible to tell the
            launcher to keep two or more simulations running at a time or to start a new simulation process
            after a certain number of runs executed. This way you can take advantage of
            multiple CPUs or CPU cores. You can set the number of CPUs to use and the number of
            runs to execute in a single process.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
            Use this option only if your simulation is CPU-limited and you have enough physical
            RAM to support all of the processes at the same time. Do not set it higher than the number of
            physical processors or cores you have in your machine.
          </div></li><li class="listitem"><p>
            <span class="emphasis"><em>Simulation time limit</em></span> and <span class="emphasis"><em>CPU time limit</em></span> can be set also to limit the runtime length
            if the simulation from the launch dialog in case those were not set from the INI file.
          </p></li><li class="listitem"><p><span class="emphasis"><em>Output options</em></span>: Various options can be set regarding simulation output. These checkboxes
            may be in one of three states: checked (on), unchecked (off), and grayed (unspecified).
            When a checkbox is the grayed state, the launcher lets the corresponding configuration option
            from the INI file to take effect.
            </p></li><li class="listitem"><p>
            Clicking on the <span class="emphasis"><em>More &gt;&gt;&gt;</em></span> link will reveal additional controls.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Dynamic libraries</em></span>: A simulation may load additional DLLs or shared libraries before execution
            or your entire simulation may be built as a shared library. The <span class="emphasis"><em>Browse</em></span> button is available to
            select one or more files (use <span class="keycap"><strong>Ctrl</strong></span> + click for multiple selection).
            This option can be used to load simulation code (i.e. simple modules), user interface libraries,
            or other extension libraries (scheduler, output file managers, etc.).
            The special macro <code class="literal">${opp_shared_libs:/workingdir}</code> expands to all shared libraries
            provided by the current project or any other project on which you currently depend.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            If your simulation is built as a shared library, you must use the <code class="literal">opp_run</code> stub executable
            to start it. opp_run is basically an empty OMNeT&#8288;+&#8288;+
            executable which understands all command line options, but does not contain any simulation code.
          </div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
            If you use external shared libraries (i.e. libraries other than the ones provided by the current open
            projects or OMNeT&#8288;+&#8288;+ itself), you must ensure that the executable part has access to the shared library.
            On Windows, you must set the <code class="literal">PATH</code>, while on Linux and Mac you must set the <code class="literal">LD_LIBRARY_PATH</code> to point to the
            directory where the DLLs or shared libraries are located. You can set these variables either
            globally or in the <span class="emphasis"><em>Environment</em></span> tab in the <span class="emphasis"><em>Launcher Configuration Dialog</em></span>.
          </div></li><li class="listitem"><p>
            <span class="emphasis"><em>NED Source Path</em></span>: The directory or directories where the NED files are read from.
            </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
              The variable <code class="literal">${opp_ned_path:/workingdir}</code> refers to an automatically computed path (derived
              from project settings). If you want to add additional NED folders to the automatically
              calculated list, use the <code class="literal">${opp_ned_path:/workingdir}:/my/additional/path</code> syntax.
            </div><p>
          </p></li><li class="listitem"><p> <span class="emphasis"><em>Image path</em></span>: A path that is used to load images and icons in the model.
          </p></li><li class="listitem"><p> <span class="emphasis"><em>Additional arguments</em></span>: Other command line arguments can be specified here and will be
            passed to the simulation process.</p></li><li class="listitem"><p>
            <span class="emphasis"><em>Build before launch</em></span>: This section allows you to configure the behavior of
            automatic build before launching. Build scope can be set either to build <span class="emphasis"><em>this project and all
            its dependencies</em></span>, <span class="emphasis"><em>this project only</em></span> or we can turn of autobuild before launch.
            Active configuration switching on build can be also configured here (<span class="emphasis"><em>Ask</em></span>, <span class="emphasis"><em>Switch</em></span>, <span class="emphasis"><em>Never switch</em></span>.)
          </p></li></ul></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1628"></a>Related Command-Line Arguments</h4></div></div></div><p> Most settings in the dialog simply translate to command-line options to the simulation
          executable. This is summarized in the following list:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> Initialization files: maps to multiple <code class="literal">-f &lt;inifile&gt;</code> options
            </p></li><li class="listitem"><p>Configuration name: adds a <code class="literal">-c &lt;configname&gt;</code> option</p></li><li class="listitem"><p>Run number: adds a <code class="literal">-r &lt;runnumber/filter&gt;</code> option</p></li><li class="listitem"><p>User interface: adds a <code class="literal">-u &lt;userinterface&gt;</code> option</p></li><li class="listitem"><p>Dynamically loaded libraries: maps to multiple <code class="literal">-l &lt;library&gt;</code> options
            </p></li><li class="listitem"><p>NED Source Path : adds a <code class="literal">-n &lt;nedpath&gt;</code> option</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1650"></a>Debug vs. Release Launch</h3></div></div></div><p>
         The launcher automatically decides whether the release or debug build of the model
         should be started. When running, release mode binaries are used automatically.
         For debugging, debug builds are started (i.e. those where the binary ends with <code class="literal">_dbg</code>
         suffix.) Before starting the simulation, the launcher ensures that the binary is
         up to date and triggers a build process (and changes also the active configuration)
         if necessary.
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Launch Configurations </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Batch Execution</td></tr></table></div></body></html>
